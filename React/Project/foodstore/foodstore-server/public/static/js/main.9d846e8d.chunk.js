(this["webpackJsonpfoodstore-ui"]=this["webpackJsonpfoodstore-ui"]||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(28),s=a.n(c),i=(a(89),a(11)),l=a(14),u=a(15),o=(a(96),a(34)),j=a(74),d="features/Auth/USER_LOGIN",b="features/Auth/USER_LOGOUT",m=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{user:null,token:null};var h=a(12),O=a(8),p="features/Products/START_FETCHING_PRODUCT",x="features/Products/ERROR_FETCHING_PRODUCT",f="features/Products/SUCCESS_FETCHING_PRODUCT",g="features/Products/SET_PAGE",v="features/Products/SET_KEYWORD",k="features/Products/SET_CATEGORY",y="features/Products/SET_TAGS",w="features/Products/NEXT_PAGE",S="features/Products/PREV_PAGE",P="features/Products/TOGGLE_TAG",_="process",N="success",I="error",C={data:[],currentPage:1,totalItems:-1,perPage:6,keyword:"",category:"",tags:[],status:"idle"};var E="features/Cart/ADD_ITEM",T="features/Cart/REMOVE_ITEM",q="features/Cart/CLEAR_ITEMS",A="features/Cart/SET_ITEMS",D=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];var M=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,L=Object(o.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{user:t.user,token:t.token};case b:return{user:null,token:null};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return e.find((function(e){return e._id===t.item._id}))?e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{qty:e._id===t.item._id?e.qty+1:e.qty})})):[].concat(Object(h.a)(e),[Object(O.a)(Object(O.a)({},t.item),{},{qty:1})]);case T:return e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{qty:e._id===t.item._id?e.qty-1:e.qty})})).filter((function(e){return e.qty>0}));case q:return[];case A:return t.items;default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(O.a)(Object(O.a)({},e),{},{status:_});case x:return Object(O.a)(Object(O.a)({},e),{},{status:I});case f:return Object(O.a)(Object(O.a)({},e),{},{status:N,data:t.data,totalItems:t.count});case g:return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case v:return Object(O.a)(Object(O.a)({},e),{},{keyword:t.keyword,category:"",tags:[],currentPage:1});case k:return Object(O.a)(Object(O.a)({},e),{},{currentPage:1,tags:[],category:t.category,keyword:""});case y:return Object(O.a)(Object(O.a)({},e),{},{tags:t.tags});case P:return e.tags.includes(t.tag)?Object(O.a)(Object(O.a)({},e),{},{currentPage:1,tags:e.tags.filter((function(e){return e!==t.tag}))}):Object(O.a)(Object(O.a)({},e),{},{currentPage:1,tags:[].concat(Object(h.a)(e.tags),[t.tag])});case w:return Object(O.a)(Object(O.a)({},e),{},{currentPage:e.currentPage+1});case S:return Object(O.a)(Object(O.a)({},e),{},{currentPage:e.currentPage-1});default:return e}}}),R=Object(o.e)(L,M(Object(o.a)(j.a))),H=a(75);a.n(H).a.config();var z,B,K="http://localhost:5000",J="FOOD STORE",G="20000",U="Rahmad Firmansyah",F="fsyah7052@gmail.com",V=a(4),X=a.n(V),Y=a(6),W=a(16),$=a.n(W);function Q(e){return{type:E,item:e}}function Z(){return{type:q}}function ee(e){return{type:A,items:e}}function te(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(Y.a)(X.a.mark((function e(t,a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.put("".concat(K,"/api/carts"),{items:a},{headers:{authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(Y.a)(X.a.mark((function e(){var t,a,r,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,$.a.get("".concat(K,"/api/carts"),{headers:{authorization:"Bearer ".concat(a)}});case 5:r=e.sent,(n=r.data).error||R.dispatch(ee(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){var e=z,t=B;z=R.getState().auth,B=R.getState().cart;var a=z.token;z!==e&&(localStorage.setItem("auth",JSON.stringify(z)),te(a,B)),B!==t&&(localStorage.setItem("cart",JSON.stringify(B)),te(a,B))}var ce=a(36),se=a.n(ce),ie=a(2);function le(){return(le=Object(Y.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("".concat(K,"/api/products"),{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=a(76),oe=a.n(ue)()((function(e){return le.apply(this,arguments)}),1e3),je=function(e){var t=e.data,a=e.count;return{type:f,data:t,count:a}},de=[{icon:"/img/menus/semua.png",label:"semua",id:""},{icon:"/img/menus/utama.png",label:"utama",id:"utama"},{icon:"/img/menus/minuman.png",label:"minuman",id:"minuman"},{icon:"/img/menus/snack.png",label:"snack",id:"snack"},{icon:"/img/menus/pastry.png",label:"pastry",id:"pastry"}],be={"":[],utama:["burger","pizza","bread"],pastry:["cheese","strawberry","muffin"],snack:["fried","bread","cheese","coffee"],minuman:["coffee","tea","hot","cold"]},me=a(1);function he(){return Object(me.jsx)(i.b,{to:"/",children:Object(me.jsx)("div",{className:"text-red-600 font-bold text-4xl",children:J})})}var Oe=a(77),pe=a.n(Oe);function xe(){var e,t=Object(u.c)((function(e){return e.auth}));return Object(me.jsx)("div",{className:"py-4",children:Object(me.jsxs)(ie.n,{desktop:2,justify:"between",items:"center",children:[Object(me.jsx)("div",{children:Object(me.jsx)(he,{})}),Object(me.jsx)(i.b,{to:(null===t||void 0===t?void 0:t.user)?"/account":"/login",children:Object(me.jsxs)("div",{className:"mr-5 text-right",children:[Object(me.jsx)("div",{className:"mr-2 inline-block text-red-600 font-bold",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.full_name}),Object(me.jsx)(ie.c,{icon:Object(me.jsx)(pe.a,{})})]})})]})})}var fe=a(33),ge=a.n(fe),ve=a(47),ke=a.n(ve);function ye(e){return e.reduce((function(e,t){return e+t.price*t.qty}),0)}function we(e){return isNaN(parseInt(e))?"NaN":new Intl.NumberFormat("id-ID",{maximumSignificantDigits:2,style:"currency",currency:"IDR"}).format(e)}function Se(e){var t=e.items,a=e.onItemInc,r=e.onItemDec,n=e.onCheckout,c=ye(t);return Object(me.jsxs)("div",{children:[Object(me.jsxs)("div",{className:"px-2 border-b mt-5 pb-5",children:[Object(me.jsxs)("div",{className:"text-3xl flex items-center text-red-700",children:[Object(me.jsx)(ke.a,{}),Object(me.jsx)("div",{className:"ml-2",children:"Keranjang"})]}),Object(me.jsxs)(ie.s,{as:"h5",children:["Total : ",we(c)," "]}),Object(me.jsx)(ie.b,{text:"Checkout",iconAfter:Object(me.jsx)(ge.a,{}),disabled:!t.length,onClick:n,fitContainer:!0})]}),Object(me.jsxs)("div",{className:"p-2",children:[t.length?null:Object(me.jsx)("div",{className:"text-enter text-sm text-red-900",children:"belum ada items di keranjang"}),t.map((function(e,t){return Object(me.jsx)("div",{className:"mb-2",children:Object(me.jsx)(ie.e,{imgUrl:"".concat(K,"/upload/").concat(e.image_url),name:e.name,qty:e.qty,color:"orange",onInc:function(t){return a(e)},onDec:function(t){return r(e)}})},t)}))]})]})}function Pe(){var e=Object(u.b)(),t=Object(l.g)(),a=Object(u.c)((function(e){return e.products})),r=Object(u.c)((function(e){return e.cart}));return n.a.useEffect((function(){e(function(){var e=Object(Y.a)(X.a.mark((function e(t,a){var r,n,c,s,i,l,u,o,j,d;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p}),r=a().products.perPage||9,n=a().products.currentPage||1,c=a().products.tags||[],s=a().products.keyword||"",i=a().products.category||"",l={q:s,limit:r,skip:n*r-r,tags:c,category:i},e.prev=7,e.next=10,oe(l);case 10:u=e.sent,o=u.data,j=o.data,d=o.count,t(je({data:j,count:d})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),t({type:x});case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e,a.currentPage,a.keyword,a.category,a.tags]),Object(me.jsx)("div",{children:Object(me.jsx)(ie.k,{sidebar:Object(me.jsx)(ie.p,{items:de,onChange:function(t){return e(function(e){return{type:k,category:e}}(t))},active:a.category,verticalAlign:"top"}),content:Object(me.jsxs)("div",{className:"md:flex md:flex-row-reverse w-full mr-5 h-full min-h-screen",children:[Object(me.jsxs)("div",{className:"w-full md:w-3/4 pl-5 pb-10",children:[Object(me.jsx)(xe,{}),Object(me.jsx)("div",{className:"w-full text-center mb-10 mt-5",children:Object(me.jsx)(ie.i,{fullRound:!0,value:a.keyword,placeholder:"cari makanan favoritmu...",fitContainer:!0,onChange:function(t){var a;e((a=t.target.value,{type:v,keyword:a}))}})}),Object(me.jsx)("div",{className:"mb-5 pl-2 flex w-3/3 overflow-auto pb-5",children:be[a.category].map((function(t,r){return Object(me.jsx)("div",{children:Object(me.jsx)(ie.m,{text:t,icon:t.slice(0,1).toUpperCase(),isActive:a.tags.includes(t),onClick:function(a){return e(function(e){return{type:P,tag:e}}(t))}})},r)}))}),"process"===a.status?Object(me.jsx)("div",{className:"flex justify-center",children:Object(me.jsx)(se.a,{color:"red"})}):Object(me.jsx)(ie.n,{desktop:3,items:"stretch",children:a.data.map((function(t,a){return Object(me.jsx)("div",{className:"p-2",children:Object(me.jsx)(ie.f,{title:t.name,imgUrl:"".concat(K,"/upload/").concat(t.image_url),price:t.price,onAddToCart:function(a){return e(Q(t))}})},a)}))}),Object(me.jsx)("div",{className:"text-center my-10",children:Object(me.jsx)(ie.l,{totalItems:a.totalItems,page:a.currentPage,perPage:a.perPage,onChange:function(t){return e(function(){return{type:g,currentPage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}}(t))},onNext:function(t){return e({type:w})},onPrev:function(t){return e({type:S})}})})]}),Object(me.jsx)("div",{className:"w-full md:w-1/4 h-full shadow-lg border-r border-white bg-gray-100",children:Object(me.jsx)(Se,{items:r,onItemInc:function(t){return e(Q(t))},onItemDec:function(t){return e(function(e){return{type:T,item:e}}(t))},onCheckout:function(e){return t.push("/checkout")}})})]}),sidebarSize:80})})}var _e=a(9),Ne=a(38),Ie={required:{value:!0,message:"Email harus diisi"},maxLength:{value:255,message:"Panjang Email maksimal 255 karakter"}},Ce={required:{value:!0,message:"Password harus diisi"},maxLength:{value:255,message:"Panjang Password maksimal 255 karakter"}};function Ee(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(Y.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(K),e.next=3,$.a.post("".concat(K,"/auth/register"),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(Y.a)(X.a.mark((function e(t,a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("".concat(K,"/auth/login"),{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t){return Me.apply(this,arguments)}function Me(){return(Me=Object(Y.a)(X.a.mark((function e(t,a){var r,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},n=r.token,e.next=3,$.a.post("".concat(K,"/auth/logout"),null,{headers:{authorization:"Bearer".concat(n)}}).then((function(e){return localStorage.removeItem("auth"),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){return{type:d,user:e,token:t}}var Re="idle",He="process",ze="success",Be="error";function Ke(){var e,t,a=Object(Ne.a)(),n=a.register,c=a.handleSubmit,s=a.errors,o=a.setError,j=r.useState(Re),d=Object(_e.a)(j,2),b=d[0],m=d[1],h=Object(u.b)(),O=Object(l.g)(),p=function(){var e=Object(Y.a)(X.a.mark((function e(t){var a,r,n,c,s,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,m(He),e.next=4,qe(a,r);case 4:n=e.sent,(c=n.data).error?(o("password",{type:"invalidCredential",message:c.message}),m(Be)):(s=c.user,i=c.token,h(Le(s,i)),O.push("/")),m(ze);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(me.jsxs)(ie.j,{size:"small",children:[Object(me.jsx)("br",{}),Object(me.jsxs)(ie.d,{color:"white",children:[Object(me.jsx)("div",{className:"text-center mb-5",children:Object(me.jsx)(he,{})}),Object(me.jsxs)("form",{onSubmit:c(p),children:[Object(me.jsx)(ie.g,{errorMessage:null===(e=s.email)||void 0===e?void 0:e.message,children:Object(me.jsx)(ie.i,{name:"email",placeholder:"Email",ref:n(Ie),fitContainer:!0})}),Object(me.jsx)(ie.g,{errorMessage:null===(t=s.password)||void 0===t?void 0:t.message,children:Object(me.jsx)(ie.h,{name:"password",placeholder:"Password",ref:n(Ce),fitContainer:!0})}),Object(me.jsx)(ie.b,{fitContainer:!0,size:"large",disabled:"process"===b,children:"Login"})]}),Object(me.jsxs)("div",{className:"text-center mt-2",children:["Belum punya akun? ",Object(me.jsx)(i.b,{to:"/register",children:Object(me.jsx)("b",{children:"Daftar sekarang."})})]})]})]})}var Je={required:{value:!0,message:"Nama Lengkap harus diisi"},maxLength:{value:500,message:"Panjang Nama lengkap maksimal 500 karakter"}},Ge={required:{value:!0,message:"Email harus diisi"},maxLength:{value:255,message:"Panjang Email maksimal 255 karakter"},pattern:{value:/^([\w-.]+@([\w-]+.)+[\w-]{2,4})?$/,message:"Email tidak valid"}},Ue={required:{value:!0,message:"Password harus diisi"},maxLength:{value:255,message:"Panjang Password maksimal 255 karakter"}},Fe={required:{value:!0,message:"Konfirmasi Password harus diisi"}},Ve="idle",Xe="process",Ye="success",We="error";function $e(){var e,t,a,r,c=Object(l.g)(),s=Object(Ne.a)(),u=s.register,o=s.handleSubmit,j=s.errors,d=s.setError,b=n.a.useState(Ve),m=Object(_e.a)(b,2),h=m[0],O=m[1],p=function(){var e=Object(Y.a)(X.a.mark((function e(t){var a,r,n,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.password,r=t.password_confirmation,a===r){e.next=3;break}return e.abrupt("return",d("password_confirmation",{type:"equality",message:"Konfirmasi Password tidak sesuai!"}));case 3:return O(Xe),e.next=6,Ee(t);case 6:n=e.sent,(s=n.data).error&&(Object.keys(s.fields).forEach((function(e){var t,a;d(e,{type:"server",message:null===(t=s.fields[e])||void 0===t||null===(a=t.properties)||void 0===a?void 0:a.message})})),O(We)),O(Ye),c.push("/register/berhasil");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(me.jsxs)(ie.j,{size:"small",children:[Object(me.jsx)("br",{}),Object(me.jsxs)(ie.d,{color:"white",children:[Object(me.jsx)("div",{className:"text-center mb-5",children:Object(me.jsx)(he,{})}),Object(me.jsxs)("form",{onSubmit:o(p),children:[Object(me.jsx)(ie.g,{errorMessage:null===(e=j.full_name)||void 0===e?void 0:e.message,children:Object(me.jsx)(ie.i,{name:"full_name",placeholder:"Nama Lengkap",ref:u(Je),fitContainer:!0})}),Object(me.jsx)(ie.g,{errorMessage:null===(t=j.email)||void 0===t?void 0:t.message,children:Object(me.jsx)(ie.i,{name:"email",placeholder:"Email",ref:u(Ge),fitContainer:!0})}),Object(me.jsx)(ie.g,{errorMessage:null===(a=j.password)||void 0===a?void 0:a.message,children:Object(me.jsx)(ie.h,{name:"password",placeholder:"Password",ref:u(Ue),fitContainer:!0})}),Object(me.jsx)(ie.g,{errorMessage:null===(r=j.password_confirmation)||void 0===r?void 0:r.message,children:Object(me.jsx)(ie.h,{name:"password_confirmation",placeholder:"Konfirmasi Password",ref:u(Fe),fitContainer:!0})}),Object(me.jsxs)(ie.b,{disabled:h===Xe,size:"large",fitContainer:!0,children:[" ",h===Xe?"Sedang Memproses":"Mendaftar"]})]}),Object(me.jsxs)("div",{className:"text-center mt-2",children:["Sudah punya akun ? ",Object(me.jsx)(i.b,{to:"/login",children:Object(me.jsx)("b",{children:"Masuk Sekarang"})})]})]})]})}function Qe(){return Object(me.jsx)(ie.j,{size:"small",children:Object(me.jsxs)(ie.d,{color:"white",children:[Object(me.jsx)(ie.s,{as:"h3",children:"Pendaftaran Berhasil"}),Object(me.jsx)(ie.s,{children:"Silahkan Masuk ke Aplikasi"}),Object(me.jsx)("br",{}),Object(me.jsx)(i.b,{to:"/login",children:Object(me.jsx)(ie.b,{fitContainer:!0,children:"Masuk"})})]})})}function Ze(e){return et.apply(this,arguments)}function et(){return(et=Object(Y.a)(X.a.mark((function e(t){var a,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,$.a.get("".concat(K,"/api/delivery-address"),{params:{limit:t.limit,skip:t.page*t.limit-t.limit},headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return at.apply(this,arguments)}function at(){return(at=Object(Y.a)(X.a.mark((function e(t){var a,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,$.a.post(K+"/api/delivery-address",t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt="idle",nt="success",ct="error";function st(){var e=r.useState([]),t=Object(_e.a)(e,2),a=t[0],n=t[1],c=r.useState(0),s=Object(_e.a)(c,2),i=s[0],l=s[1],u=r.useState(rt),o=Object(_e.a)(u,2),j=o[0],d=o[1],b=r.useState(1),m=Object(_e.a)(b,2),h=m[0],O=m[1],p=r.useState(10),x=Object(_e.a)(p,2),f=x[0],g=x[1],v=r.useCallback(Object(Y.a)(X.a.mark((function e(){var t,a,r,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(rt),e.next=3,Ze({page:h,limit:f});case 3:if(t=e.sent,a=t.data,r=a.data,c=a.count,!a.error){e.next=11;break}return d(ct),e.abrupt("return");case 11:d(nt),n(r),l(c);case 14:case"end":return e.stop()}}),e)}))),[h,f]);return r.useEffect((function(){v()}),[v]),{data:a,count:i,status:j,page:h,limit:f,setPage:O,setLimit:g}}var it=[{Header:"Nama",accessor:"nama"},{Header:"Detail",accessor:function(e){return Object(me.jsxs)("div",{children:[e.provinsi,", ",e.kabupaten,","]})}}];function lt(){var e=st(),t=e.data,a=e.limit,r=e.page,n=e.status,c=e.count,s=e.setPage;return Object(me.jsx)(ie.j,{size:"large",children:Object(me.jsxs)("div",{children:[Object(me.jsx)(xe,{}),Object(me.jsx)(ie.s,{as:"h3",children:"Alamat Pengiriman"}),Object(me.jsx)("br",{}),Object(me.jsx)(i.b,{to:"/alamat-pengiriman/tambah",children:Object(me.jsx)(ie.b,{children:" Tambah baru "})}),Object(me.jsx)("br",{}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.r,{items:t,columns:it,totalItems:c,page:r,isLoading:"process"===n,perPage:a,onPageChange:function(e){return s(e)}}),"success"!==n||t.length?null:Object(me.jsxs)("div",{className:"text-center p-10",children:["Kamu belum menambahkan alamat pengiriman. ",Object(me.jsx)("br",{}),Object(me.jsx)(i.b,{to:"alamat-pengiriman/tambah",children:Object(me.jsx)(ie.b,{children:" Tambah baru "})})]})]})})}var ut={required:{value:!0,message:"Nama alamat tidak boleh kosong."},maxLength:{value:500,message:"Panjang nama alamat maksimal 500 karakter"},minLength:{value:5,message:"Panjang nama alamat minimal 5 karakter"}},ot={required:{value:!0,message:"Provinsi harus dipilih."}},jt={required:{value:!0,message:"Kabupaten harus dipilih."}},dt={required:{value:!0,message:"Kecamatan harus dipilih."}},bt={required:{value:!0,message:"Kelurahan harus dipilih."}},mt={required:{value:!0,message:"Detail alamat harus diisi"},maxLength:{value:1e3,message:"Panjang detail alamat maksimal 1000 karakter"}};function ht(e){var t=e.tingkat,a=e.kodeInduk,r=e.onChange,c=e.value,s=n.a.useState([]),i=Object(_e.a)(s,2),l=i[0],u=i[1],o=n.a.useState(!1),j=Object(_e.a)(o,2),d=j[0],b=j[1];return n.a.useEffect((function(){b(!0),$.a.get("".concat(K,"/api/wilayah/").concat(t,"?kode_induk=").concat(a)).then((function(e){var t=e.data;return u(t)})).finally((function(e){return b(!1)}))}),[t,a]),Object(me.jsx)(ie.o,{options:l.map((function(e){return{label:e.nama,value:e.kode}})),onChange:r,value:c,isLoading:d,isDisabled:d||!l.length})}function Ot(){Object(l.g)();var e,t,a,r,c,s,i,u,o,j=Object(Ne.a)(),d=j.handleSubmit,b=j.register,m=j.errors,h=j.setValue,O=j.watch,p=j.getValues,x=O();n.a.useEffect((function(){b({name:"provinsi"},ot),b({name:"kabupaten"},jt),b({name:"kecamatan"},dt),b({name:"kelurahan"},bt)}),[b]),n.a.useEffect((function(){b({name:"kabupaten"},null),b({name:"kecamatan"},null),b({name:"kelurahan"},null)}),[x.provinsi,h]),n.a.useEffect((function(){b({name:"kecamatan"},null),b({name:"kelurahan"},null)}),[x.kabupaten,h]),n.a.useEffect((function(){b({name:"kelurahan"},null)}),[x.kecamatan,h]);var f=function(e,t){return h(e,t,{shouldValidate:!0,shouldDirty:!0})},g=function(){var e=Object(Y.a)(X.a.mark((function e(t){var a,r,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={nama:t.nama_alamat,detail:t.detail_alamat,provinsi:t.provinsi.label,kabupaten:t.kabupaten.label,kecamatan:t.kecamatan.label,kelurahan:t.kelurahan.label},e.next=3,tt(a);case 3:if(r=e.sent,n=r.data,console.log(n),n.error){e.next=8;break}return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(me.jsxs)(ie.j,{children:[Object(me.jsx)(xe,{}),Object(me.jsx)("br",{}),Object(me.jsx)("div",{children:Object(me.jsxs)("form",{onSubmit:d(g),children:[Object(me.jsx)(ie.g,{label:"Nama alamat",errorMessage:null===(e=m.nama_alamat)||void 0===e?void 0:e.message,color:"black",children:Object(me.jsx)(ie.i,{placeholder:"Nama alamat",fitContainer:!0,name:"nama_alamat",ref:b(ut)})}),Object(me.jsx)(ie.g,{label:"Provinsi",errorMessage:null===(t=m.provinsi)||void 0===t?void 0:t.message,color:"black",children:Object(me.jsx)(ht,{onChange:function(e){return f("provinsi",e)},name:"provinsi",value:p().provinsi})}),Object(me.jsx)(ie.g,{label:"Kabupaten/kota",errorMessage:null===(a=m.kabupaten)||void 0===a?void 0:a.message,color:"black",children:Object(me.jsx)(ht,{tingkat:"kabupaten",kodeInduk:null===(r=p().provinsi)||void 0===r?void 0:r.value,onChange:function(e){return f("kabupaten",e)},value:p().kabupaten})}),Object(me.jsx)(ie.g,{label:"Kecamatan",errorMessage:null===(c=m.kecamatan)||void 0===c?void 0:c.message,color:"black",children:Object(me.jsx)(ht,{tingkat:"kecamatan",kodeInduk:null===(s=p().kabupaten)||void 0===s?void 0:s.value,onChange:function(e){return f("kecamatan",e)},value:p().kecamatan})}),Object(me.jsx)(ie.g,{label:"Kelurahan",errorMessage:null===(i=m.kelurahan)||void 0===i?void 0:i.message,color:"black",children:Object(me.jsx)(ht,{tingkat:"desa",kodeInduk:null===(u=p().kecamatan)||void 0===u?void 0:u.value,onChange:function(e){return f("kelurahan",e)},value:p().kelurahan})}),Object(me.jsx)(ie.g,{label:"Detail alamat",errorMessage:null===(o=m.detail_alamat)||void 0===o?void 0:o.message,color:"black",children:Object(me.jsx)(ie.t,{placeholder:"Detail alamat",fitContainer:!0,name:"detail_alamat",ref:b(mt)})}),Object(me.jsx)(ie.b,{fitContainer:!0,children:"Simpan"})]})})]})}ht.defaultProps={tingkat:"provinsi"};var pt=a(78),xt=a.n(pt),ft=a(79),gt=a.n(ft),vt=a(54),kt=a.n(vt),yt=a(80),wt=a.n(yt);function St(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(Y.a)(X.a.mark((function e(t){var a,r,n,c,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,n=t.limit,c=t.page,s=c*n-n,e.next=5,W.get("".concat(K,"/api/orders"),{params:{skip:s,limit:n},headers:{authorization:"Bearer ".concat(r)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(Y.a)(X.a.mark((function e(t){var a,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,W.post("".concat(K,"/api/orders"),t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var It=function(e){var t=e.children;return Object(me.jsx)("div",{className:"text-3xl flex justify-center",children:t})},Ct=[{Header:"Nama produk",accessor:function(e){return Object(me.jsxs)("div",{className:"flex items-center",children:[Object(me.jsx)("img",{src:"".concat(K,"/upload/").concat(e.image_url),width:48,alt:e.name}),e.name]})}},{Header:"Jumlah",accessor:"qty"},{Header:"Harga satuan",id:"price",accessor:function(e){return Object(me.jsxs)("span",{children:[" @ ",we(e.price)," "]})}},{Header:"Harga total",id:"subtotal",accessor:function(e){return Object(me.jsx)("div",{children:we(e.price*e.qty)})}}],Et=[{Header:"Nama alamat",accessor:function(e){return Object(me.jsxs)("div",{children:[e.nama," ",Object(me.jsx)("br",{}),Object(me.jsxs)("small",{children:[e.provinsi,", ",e.kabupaten,", ",e.kecamatan,", ",e.kelurahan," ",Object(me.jsx)("br",{}),e.detail]})]})}}],Tt=[{label:"Item",icon:Object(me.jsx)(It,{children:Object(me.jsx)(ke.a,{})})},{label:"Alamat",icon:Object(me.jsx)(It,{children:Object(me.jsx)(xt.a,{})})},{label:"Konfirmasi",icon:Object(me.jsx)(It,{children:Object(me.jsx)(gt.a,{})})}];function qt(){var e=Object(u.c)((function(e){return e.cart})),t=n.a.useState(0),a=Object(_e.a)(t,2),r=a[0],c=a[1],s=n.a.useState(null),o=Object(_e.a)(s,2),j=o[0],d=o[1],b=st(),m=b.data,h=b.status,O=b.limit,p=b.page,x=b.count,f=b.setPage,g=Object(l.g)(),v=Object(u.b)();function k(){return(k=Object(Y.a)(X.a.mark((function e(){var t,a,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={delivery_fee:G,delivery_address:j._id},e.next=3,_t(t);case 3:if(a=e.sent,!(null===(r=a.data)||void 0===r?void 0:r.error)){e.next=7;break}return e.abrupt("return");case 7:g.push("/invoice/".concat(r._id)),v(Z());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.length?Object(me.jsxs)(ie.j,{children:[Object(me.jsx)(xe,{}),Object(me.jsx)(ie.s,{as:"h3",children:"Alamat Pengiriman"}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.q,{steps:Tt,active:r}),0===r?Object(me.jsxs)("div",{children:[Object(me.jsx)("br",{}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.r,{items:e,columns:Ct,perPage:e.length,showPagination:!1}),Object(me.jsx)("br",{}),Object(me.jsxs)("div",{className:"text-right",children:[Object(me.jsxs)(ie.s,{as:"h4",children:["Subtotal : ",we(ye(e))]}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.b,{onClick:function(e){return c(r+1)},color:"red",iconAfter:Object(me.jsx)(ge.a,{}),children:" Selanjutnya "})]})]}):null,1===r?Object(me.jsxs)("div",{children:[Object(me.jsx)(ie.r,{items:m,columns:Et,perPage:O,page:p,onPageChange:function(e){return f(e)},totalItems:x,isLoading:"process"===h,selectable:!0,primaryKey:"_id",selectedRow:j,onSelectRow:function(e){console.log(e),console.log(j),d(e)}}),m.length||"success"!==h?null:Object(me.jsx)("div",{className:"text-center my-10",children:Object(me.jsxs)(i.b,{to:"/alamat-pengiriman/tambah",children:["Kamu belum memiliki alamat pengiriman ",Object(me.jsx)("br",{}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.b,{children:" Tambah Alamat "})]})}),Object(me.jsx)("br",{}),Object(me.jsx)("br",{}),Object(me.jsxs)(ie.n,{desktop:2,tablet:2,mobile:2,children:[Object(me.jsx)("div",{children:Object(me.jsx)(ie.b,{onClick:function(e){return c(r-1)},color:"gray",iconBefore:Object(me.jsx)(kt.a,{}),children:" Sebelumnya "})}),Object(me.jsx)("div",{className:"text-right",children:Object(me.jsx)(ie.b,{onClick:function(e){return c(r+1)},disabled:!j,color:"red",size:"large",iconAfter:Object(me.jsx)(ge.a,{}),children:"Bayar"})})]})]}):null,2===r?Object(me.jsxs)("div",{children:[Object(me.jsx)(ie.r,{columns:[{Header:"",accessor:"label"},{Header:"",accessor:"value"}],items:[{label:"Alamat",value:Object(me.jsxs)("div",{children:[j.nama," ",Object(me.jsx)("br",{}),j.provinsi,", ",j.kabupaten,", ",j.kecamatan,", ",j.kelurahan," ",Object(me.jsx)("br",{}),j.detail]})},{label:"Subtotal",value:we(ye(e))},{label:"Ongkir",value:we(G)},{label:"Total",value:Object(me.jsx)("b",{children:we(ye(e)+parseInt(G))})}],showPagination:!1}),Object(me.jsx)("br",{}),Object(me.jsxs)(ie.n,{desktop:2,tablet:2,mobile:2,children:[Object(me.jsx)("div",{children:Object(me.jsx)(ie.b,{onClick:function(e){return c(r-1)},color:"gray",iconBefore:Object(me.jsx)(kt.a,{}),children:"Sebelumnya"})}),Object(me.jsx)("div",{className:"text-right",children:Object(me.jsx)(ie.b,{onClick:function(){return k.apply(this,arguments)},color:"red",size:"large",iconBefore:Object(me.jsx)(wt.a,{}),children:"Bayar"})})]})]}):null]}):Object(me.jsx)(l.a,{to:"/"})}function At(){return(At=Object(Y.a)(X.a.mark((function e(t){var a,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,$.a.get("".concat(K,"/api/invoices/").concat(t),{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){switch(e.status){case"waiting_payment":return Object(me.jsx)(ie.a,{color:"orange",children:"Menunggu Pembayaran"});case"paid":return Object(me.jsx)(ie.a,{color:"yellow",children:"Sedang Diproses"});case"processing":case"delivered":return Object(me.jsx)(ie.a,{color:"blue",children:"Dalam pengiriman"});default:return Object(me.jsx)("div",{})}}function Mt(){var e,t,a,r,c,s,i,u,o=n.a.useState(null),j=Object(_e.a)(o,2),d=j[0],b=j[1],m=n.a.useState(""),h=Object(_e.a)(m,2),O=h[0],p=h[1],x=n.a.useState("process"),f=Object(_e.a)(x,2),g=f[0],v=f[1],k=Object(l.h)().params;return n.a.useEffect((function(){(function(e){return At.apply(this,arguments)})(null===k||void 0===k?void 0:k.order_id).then((function(e){var t=e.data;console.log(t),(null===t||void 0===t?void 0:t.error)?p(t.message||"Terjadi kesalahan yang tidak diketahui"):p(""),b(t)})).finally((function(){return v("idle")}))}),[k]),O.length?Object(me.jsxs)(ie.j,{children:[Object(me.jsx)(xe,{}),Object(me.jsx)(ie.s,{as:"h3",children:"Terjadi Kesalahan"}),O]}):"process"===g?Object(me.jsx)(ie.j,{children:Object(me.jsx)("div",{className:"text-center py-10",children:Object(me.jsx)("div",{className:"inline-block",children:Object(me.jsx)(se.a,{color:"red"})})})}):Object(me.jsxs)(ie.j,{children:[Object(me.jsx)(xe,{}),Object(me.jsx)(ie.s,{as:"h3",children:"Invoice"}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.r,{showPagination:!1,items:[{label:"Status",value:Object(me.jsx)(Dt,{status:null===d||void 0===d?void 0:d.payment_status})},{label:"Order ID",value:"#"+(null===d||void 0===d||null===(e=d.order)||void 0===e?void 0:e.order_number)},{label:"Total amount",value:we(null===d||void 0===d?void 0:d.total)},{label:"Billed to",value:Object(me.jsxs)("div",{children:[Object(me.jsxs)("b",{children:[null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.full_name," "]})," ",Object(me.jsx)("br",{}),null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.email," ",Object(me.jsx)("br",{})," ",Object(me.jsx)("br",{}),null===d||void 0===d||null===(r=d.delivery_address)||void 0===r?void 0:r.detail," ",Object(me.jsx)("br",{}),null===d||void 0===d||null===(c=d.delivery_address)||void 0===c?void 0:c.kelurahan,",",null===d||void 0===d||null===(s=d.delivery_address)||void 0===s?void 0:s.kecamatan," ",Object(me.jsx)("br",{}),null===d||void 0===d||null===(i=d.delivery_address)||void 0===i?void 0:i.kabupaten," ",Object(me.jsx)("br",{}),null===d||void 0===d||null===(u=d.delivery_address)||void 0===u?void 0:u.provinsi]})},{label:"Payment to",value:Object(me.jsxs)("div",{children:[U," ",Object(me.jsx)("br",{}),F," ",Object(me.jsx)("br",{})]})}],columns:[{Header:"Invoice",accessor:"label"},{Header:"",accessor:"value"}]})]})}Dt.defaultProps={};var Lt=a(81),Rt=a.n(Lt),Ht=a(82),zt=a.n(Ht),Bt=a(83),Kt=a.n(Bt),Jt=function(e){var t=e.children;return Object(me.jsx)("div",{className:"text-white text-5xl flex justify-center mb-5",children:t})},Gt=[{label:"Beranda",icon:Object(me.jsx)(Jt,{children:Object(me.jsx)(Rt.a,{})}),url:"/"},{label:"Alamat",icon:Object(me.jsx)(Jt,{children:Object(me.jsx)(zt.a,{})}),url:"/alamat-pengiriman"},{label:"Pesanan",icon:Object(me.jsx)(Jt,{children:Object(me.jsx)(Kt.a,{})}),url:"/pesanan"},{label:"Logout",icon:Object(me.jsx)(Jt,{children:Object(me.jsx)(ge.a,{})}),url:"/logout"}];function Ut(){return Object(me.jsxs)(ie.j,{children:[Object(me.jsx)(xe,{}),Object(me.jsx)(ie.s,{as:"h3",children:"Akun Anda"}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.n,{desktop:4,tablet:4,mobile:2,children:Gt.map((function(e,t){return Object(me.jsx)(i.b,{to:e.url,children:Object(me.jsx)(ie.d,{header:e.icon,body:Object(me.jsx)("div",{className:"text-center font-bold text-white",children:e.label})})},t)}))})]})}var Ft=a(84),Vt=a.n(Ft),Xt=[{Header:"",id:"Status",accessor:function(e){return Object(me.jsxs)("div",{children:[" #",e.order_number," ",Object(me.jsx)("br",{})," "]})}},{Header:"Items",accessor:function(e){return Object(me.jsx)("div",{children:e.order_items.map((function(e){return Object(me.jsxs)("div",{children:[e.name," ",e.qty]},e._id)}))})}},{Header:"Total",accessor:function(e){return Object(me.jsx)("div",{children:we(ye(e.order_items)+e.delivery_fee)})}},{Header:"Invoice",accessor:function(e){return Object(me.jsx)("div",{children:Object(me.jsx)(i.b,{to:"/invoice/".concat(e._id),children:Object(me.jsx)(ie.b,{color:"gray",iconBefore:Object(me.jsx)(Vt.a,{}),children:"Invoice"})})})}}];function Yt(){var e=n.a.useState([]),t=Object(_e.a)(e,2),a=t[0],r=t[1],c=n.a.useState(0),s=Object(_e.a)(c,2),i=s[0],l=s[1],u=n.a.useState("idle"),o=Object(_e.a)(u,2),j=o[0],d=o[1],b=n.a.useState(1),m=Object(_e.a)(b,2),h=m[0],O=m[1],p=n.a.useState(10),x=Object(_e.a)(p,2),f=x[0],g=(x[1],n.a.useCallback(Object(Y.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("process"),e.next=3,St({limit:f,page:h});case 3:if(t=e.sent,!(a=t.data).error){e.next=8;break}return d("error"),e.abrupt("return");case 8:d("success"),r(a.data),l(a.count);case 11:case"end":return e.stop()}}),e)}))),[h,f]));return n.a.useEffect((function(){g()}),[g]),Object(me.jsxs)(ie.j,{children:[Object(me.jsx)(xe,{}),Object(me.jsx)(ie.s,{as:"h3",children:"Pesanan Anda"}),Object(me.jsx)("br",{}),Object(me.jsx)(ie.r,{items:a,totalItems:i,columns:Xt,onPageChange:function(e){return O(e)},page:h,isLoading:"process"===j})]})}function Wt(){var e=Object(l.g)(),t=Object(u.b)();return n.a.useEffect((function(){De().then((function(){return t({type:b})})).then((function(){return e.push("/")}))}),[e,De]),Object(me.jsx)(ie.j,{children:Object(me.jsx)("div",{className:"text-center flex flex-col justify-center items-center",children:Object(me.jsx)(se.a,{color:"red"})})})}var $t=a(18),Qt=function(e){var t=e.children,a=Object($t.a)(e,["children"]),r=Object(u.c)((function(e){return e.auth})).user;return Object(me.jsx)(l.b,Object(O.a)(Object(O.a)({},a),{},{children:r?t:Object(me.jsx)(l.a,{to:"/login"})}))},Zt=function(e){var t=e.children,a=Object($t.a)(e,["children"]),r=Object(u.c)((function(e){return e.auth})).user;return Object(me.jsx)(l.b,Object(O.a)(Object(O.a)({},a),{},{children:r?Object(me.jsx)(l.a,{to:"/"}):t}))};var ea=function(){return n.a.useEffect((function(){R.subscribe(ne),function(){re.apply(this,arguments)}()}),[]),Object(me.jsx)(u.a,{store:R,children:Object(me.jsx)(i.a,{children:Object(me.jsxs)(l.d,{children:[Object(me.jsx)(l.b,{exact:!0,path:"/",children:Object(me.jsx)(Pe,{})}),Object(me.jsx)(Zt,{exact:!0,path:"/login",children:Object(me.jsx)(Ke,{})}),Object(me.jsx)(Zt,{exact:!0,path:"/register",component:$e}),Object(me.jsx)(Zt,{exact:!0,path:"/register/berhasil",children:Object(me.jsx)(Qe,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/account",children:Object(me.jsx)(Ut,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/pesanan",children:Object(me.jsx)(Yt,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/alamat-pengiriman/",children:Object(me.jsx)(lt,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/alamat-pengiriman/tambah",children:Object(me.jsx)(Ot,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/checkout",children:Object(me.jsx)(qt,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/invoice/:order_id",children:Object(me.jsx)(Mt,{})}),Object(me.jsx)(Qt,{exact:!0,path:"/logout",children:Object(me.jsx)(Wt,{})})]})})})};s.a.render(Object(me.jsx)(n.a.StrictMode,{children:Object(me.jsx)(ea,{})}),document.getElementById("root"))},89:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.9d846e8d.chunk.js.map